<!-- SYNC IMPACT REPORT
Version change: N/A → 1.0.0
Modified principles: N/A (new constitution)
Added sections: Core Principles (6), Additional Constraints, Development Workflow, Governance
Removed sections: N/A
Templates requiring updates:
  - .specify/templates/plan-template.md: ✅ updated
  - .specify/templates/spec-template.md: ✅ updated
  - .specify/templates/tasks-template.md: ✅ updated
  - .specify/templates/commands/*.md: ✅ updated
Follow-up TODOs: None
-->
# Todo Full-Stack Web Application Constitution

## Core Principles

### Spec-Driven Development Only
Every change must originate from a written spec; No code may be written without a corresponding spec; No inferred or assumed requirements; Specs are the single source of truth.

### Agentic Dev Stack Workflow
Claude Code must always follow this sequence: Write Spec → Generate Plan → Break into Tasks → Implement via Claude Code. Skipping or reordering steps is not allowed.

### No Manual Coding
All code must be generated or modified by Claude Code; Human-written code is not allowed; Prompts, iterations, and plans are part of evaluation.

### Reusable Intelligence First
Prefer reusable skills over one-off solutions; Avoid hard-coded logic; Design abstractions reusable in later phases.

### Locked Technology Stack
Frontend: Next.js 16+ (App Router); Backend: Python FastAPI; ORM: SQLModel; Database: Neon Serverless PostgreSQL; Authentication: Better Auth; Spec System: Claude Code + Spec-Kit Plus. No substitutions without a spec amendment.

### Authentication & Security First
Authentication enforced on all endpoints; Strict user isolation; Stateless authentication with JWT; Token expiry enforced; Backend must verify JWT signature and enforce task ownership on every request.

## Additional Constraints

### Repository Structure Authority
The authoritative structure is: Todo-app/├── .spec-kit/└── config.yaml├── specs/├── frontend/├── backend/├── docker-compose.yml└── README.md. Frontend logic → /frontend only; Backend logic → /backend only; Specs are read-only during implementation unless explicitly updated.

### API Contract (Immutable Without Spec Change)
All endpoints must exist exactly as defined: GET /api/{user_id}/tasks (List all tasks), POST /api/{user_id}/tasks (Create task), GET /api/{user_id}/tasks/{id} (Get task), PUT /api/{user_id}/tasks/{id} (Update task), DELETE /api/{user_id}/tasks/{id} (Delete task), PATCH /api/{user_id}/tasks/{id}/complete (Toggle completion). user_id must match authenticated user; Backend must never trust client-sent user_id; All queries must be filtered by authenticated user.

### Feature Scope — Phase II
Mandatory features: Add Task, Delete Task, Update Task, View Task List, Mark Task as Complete. Allowed enhancements: Intermediate and Advanced features may be added only if fully defined in specs, do not break basic features, and follow same auth & ownership rules.

## Development Workflow

### Prohibited Actions
❌ Manual coding, ❌ Skipping specs, ❌ Hardcoding secrets, ❌ Cross-user data access, ❌ Mixing frontend & backend logic, ❌ Editing files outside defined structure.

### Success Criteria
Phase II is successful only if: All Basic Level features work end-to-end, Authentication enforced on all endpoints, Specs, plans, and tasks are auditable, Claude Code follows constitution & skills strictly, Codebase is reusable for Phase III+.

### Frontend Requirements
Must be responsive; Must use centralized API client; JWT attached to every request; No direct backend calls inside UI components; UI logic & data fetching must remain separated.

### Database Requirements
Neon Serverless PostgreSQL is the single source of truth; SQLModel defines all schemas; Every task must belong to a user; No schema changes without database spec update.

## Governance

This constitution follows the Agentic Dev Stack workflow and enforces Spec-Driven Development. All code must be generated by Claude Code following the sequence: Write Spec → Generate Plan → Break into Tasks → Implement via Claude Code. All changes must comply with the locked technology stack and repository structure. The constitution overrides all ad-hoc instructions unless explicitly updated via spec amendment. Manual coding is strictly prohibited.

**Version**: 1.0.0 | **Ratified**: 2026-01-13 | **Last Amended**: 2026-01-13